---
title: "Writing a reproducible paper in Pagedown^[Corresponding address: mail@paulcbauer.eu.<br> Acknowledgments: I am grateful to all those generous people that invest their time into open-source software.]"
shorttitle: "Writing a reproducible paper in Pagedown"
author:
  - name: Paul C. Bauer
    affiliation: Mannheim Centre for European Social Research
    email: <mail@paulcbauer.eu>
  - name: Camille Landesvatter
    affiliation: Mannheim Centre for European Social Research
    email: <landesvatterc@gmail.com>
date: |
  |       
  | Based on: https://osf.io/q395s
  | This version: `r gsub("^0", "", format(Sys.time(), "%B %d, %Y"))`
  |
  | Feedback? Errors?
  | mail@paulcbauer.eu
  | [Github repository](https://github.com/paulcbauer/Writing_a_reproducable_paper_in_rmarkdown/)
abstract: 'The present paper provides a template for a reproducible scientific paper written in R Markdown. Below I outline some of the "tricks"/code (e.g., referencing tables, sections etc.) I had to figure out to produce this document. The underlying files which produce this document can be downloaded [here](https://drive.google.com/drive/folders/1zJP3cNPrHN-gj0rcmbHQgg-XA0hqDXdd?usp=sharing). I think I got pretty far but there is always room for improvement and more automatization, in parallel to the incredible developments in R and Rstudio (bookdown etc.). I intend to update this file when I discover more convenient code (you can follow any updates through the corresponding [github repo](https://github.com/paulcbauer/Writing_a_reproducable_paper_in_rmarkdown/)).'
# at least one keyword must be supplied
keywords: [keywords]
links-to-footnotes: true
paged-footnotes: true
bibliography: index.bib
output: 
  pagedown::jss_paged:
    self_contained: false
    css: ['jss.css', 'jss-fonts.css', 'jss-page.css']
# uncomment this line to produce HTML and PDF in RStudio:
#knit: pagedown::chrome_print
---

\clearpage

\renewcommand{\baselinestretch}{0.5}\normalsize
\tableofcontents
\renewcommand{\baselinestretch}{1.1}\normalsize

\clearpage


\newpage
# Why reproducible research (in R)?




\newpage
# Prerequesites






\newpage
# Basics: Input and output files





\newpage
# Referencing within your document






\newpage
# Software versioning





\newpage
# Inline code & results

Can be inserted in regular [R Markdown]{.proglang} blocks.

```{r}
x <- 1:10
x
```



\newpage
# Data
## Import

```{r, echo=T, results="raw"}
data <- read.csv("data.csv")
head(data)
```


# Tables {#sec:tables}

Producing good tables and referencing these tables within a R Markdown PDF has been a hassle but got much better. Examples that you may use are shown below. The way you reference tables is slightly different, e.g., for `stargazer` the label is contained in the function, for `kable` it's contained in the chunk name.

## stargazer(): Summary and regression tables

Table \@ref(tab1) shows summary stats of your data.^[To reference the table where you set the identifier in the stargazer function you only need to use the actual label, i.e., ´tab1´.] I normally use `stargazer()` [@hlavac2013stargazer] which offers extreme flexibility regarding table output (see `?stargazer`). 

```{r, echo=TRUE, message=FALSE, warning=FALSE, results="asis"}
library(stargazer)
stargazer(cars, 
          title = "Summary table with stargazer",
          label="tab1", 
          table.placement = "H", 
          type="html",
          header=FALSE)
```




Table \@ref(tab2) shows the output for a regression table. Make sure you name all your models and explicitly refer to model names (M1, M2 etc.) in the text.

```{r, echo=TRUE, message=FALSE, warning=FALSE, results="asis"}
library(stargazer)
model1 <- lm(speed ~ dist, data = cars)
model2 <- lm(speed ~ dist, data = cars)
model3 <- lm(dist ~ speed, data = cars)

stargazer(model1, model2, model3,
          title = "Regression table with stargazer",
          label="tab2",
          table.placement = "H", 
          column.labels = c("M1", "M2", "M3"),
          type="html",
          model.numbers = FALSE,
          header=FALSE)
```




## kable() and kable_styling()

Another great function is `kable()` (`knitr` package) in combination with `kableExtra`. Table \@ref(tab:tab3) provides an example.^[To reference the table produced by the chunk you need to add ´tab:´ to the chunk name, i.e., ´tab:tab3´.]

```{r tab3, echo=TRUE, message=FALSE, warning=FALSE, results="asis"}
library(knitr)
library(kableExtra)

kable(mtcars[1:10,], row.names = TRUE, 
      caption = 'Table with kable() and kablestyling()', 
      format = "html", booktabs = T) %>%
        kable_styling(full_width = T, 
                      latex_options = c("striped", 
                                        "scale_down",
                                        "HOLD_position"),
                      font_size = 10)


```















# Render the document

If you use the option `self_contained: false` (see line \#22 of this `Rmd` file), don't click on the `Knit` button in RStudio. Use instead the **xaringan** [@R-xaringan] RStudio add-in _Infinite Moon Reader_.

# References {-}

```{r, include=FALSE}
knitr::write_bib(c(.packages(), 'pagedown', 'xaringan'), 'index.bib')
```
